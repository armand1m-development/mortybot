import { CommandMiddleware } from "grammy/composer.ts";
import { BotContext } from "/src/context/mod.ts";
import { getRandomValue } from "/src/utilities/array/random.ts";

const table: Record<string, string[] | undefined> = {
  "&": "â…‹".split(""),
  "%": ["â…", "â„€", "â„", "â„†", "â„…"],
  "0": ["ï¼", "Ñ²", "Ê˜"],
  "1": ["â€", "â¶", "ï¼‘"],
  "2": ["ï¼’", "â·", "â"],
  "3": ["ï¼“", "â¸", "â‚"],
  "4": ["ï¼”", "â¹", "âƒ"],
  "5": ["âº", "â„", "ï¼•"],
  "6": ["ï¼–", "â»", "â…"],
  "7": ["ï¼—", "â¼", "â†"],
  "8": ["ï¼˜", "â‡", "â½"],
  "9": ["âˆ", "â¾", "ï¼™"],
  "<": [
    "â‰¼",
    "â‰º",
    "â‰ª",
    "â˜¾",
    "â‰¾",
    "â‹œ",
    "â‹",
    "â‹",
    "âŠ‚",
    "âŠ",
    "âŠ‘",
    "ã€Š",
    "ï¼œ",
    "â®",
    "â°",
    "â«·",
  ],
  ">": "â˜½â‰«â‰»â‰½â‰¿â‹â‹Ÿâ‹‘âŠƒâŠâŠ’â«¸ã€‹ï¼â¯â±".split(""),
  "[": "ã€ã€–ã€˜ã€šï¼»".split(""),
  "]": "ã€‘ã€—ã€™ã€›ï¼½".split(""),
  "*": "âœ¨âœ©âœªâœ«âœ¬âœ­âœ®âœ¯âœ°âœ¦âœ±âœ²âœ³âœ´âœµâœ¶âœ·ÖÖâœ¸âœ¹âœºâœ»âœ¼âœ½âœ¾âœ¿â€ââ‚âƒâ„â˜…â˜†ï¼Š".split(""),
  "a": [
    "â’¶",
    "â“",
    "Î±",
    "ï¼¡",
    "ï½",
    "á—©",
    "å‚",
    "Î”",
    "à¸„",
    "Î±",
    "Î¬",
    "Ãƒ",
    "ğ”",
    "ğ“ª",
    "ğ’¶",
    "ğ“",
    "ğ€",
    "ğš",
    "ğ”¸",
    "ğ•’",
    "áµƒ",
  ],
  "b": [
    "â’·",
    "â“‘",
    "Ğ²",
    "ï¼¢",
    "ä¹ƒ",
    "ï½‚",
    "á—·",
    "Î²",
    "à¹’",
    "Ğ²",
    "Ğ²",
    "Î²",
    "ğ”Ÿ",
    "ğ“«",
    "ğ’·",
    "ğ“‘",
    "ğ",
    "ğ›",
    "ğ”¹",
    "ğ•“",
    "áµ‡",
  ],
  "c": [
    "â’¸",
    "â“’",
    "åŒš",
    "Â¢",
    "ï¼£",
    "ï½ƒ",
    "á‘•",
    "Ä†",
    "Ï‚",
    "c",
    "Ï‚",
    "ÄŒ",
    "â„ƒ",
    "ğ” ",
    "ğ“¬",
    "ğ’¸",
    "ğ“’",
    "ğ‚",
    "ğœ",
    "â„‚",
    "ğ•”",
    "á¶œ",
  ],
  "d": [
    "â’¹",
    "â““",
    "âˆ‚",
    "ï¼¤",
    "ï½„",
    "á—ª",
    "Ä",
    "à¹”",
    "âˆ‚",
    "Ä‘",
    "Ä",
    "ğ”¡",
    "ğ“­",
    "ğ’¹",
    "ğ““",
    "ğƒ",
    "á—ª",
    "ğ",
    "ğ”»",
    "ğ••",
    "áµˆ",
  ],
  "e": [
    "â’º",
    "ä¹‡",
    "â“”",
    "Ñ”",
    "ï¼¥",
    "ï½…",
    "á—´",
    "â‚¬",
    "Ñ”",
    "Îµ",
    "Î­",
    "áº¸",
    "ğ”¢",
    "ğ’†",
    "ğ‘’",
    "ğ“”",
    "ğ„",
    "ğ",
    "ğ”¼",
    "ğ•–",
    "áµ‰",
  ],
  "f": [
    "â’»",
    "â“•",
    "Æ’",
    "ï¼¦",
    "ï½†",
    "åƒ",
    "á–´",
    "â„±",
    "Å¦",
    "Ò“",
    "Ò“",
    "Æ‘",
    "ğ”£",
    "ğ’‡",
    "ğ’»",
    "ğ“•",
    "ğ…",
    "ğŸ",
    "ğ”½",
    "ğ•—",
    "á¶ ",
  ],
  "g": [
    "â’¼",
    "â“–",
    "Ù‚",
    "g",
    "ï¼§",
    "ï½‡",
    "Ç¤",
    "á¶",
    "ï»®",
    "g",
    "Ä£",
    "Ä",
    "ğ”¤",
    "ğ“°",
    "ğ‘”",
    "ğ“–",
    "ğ†",
    "ğ ",
    "ğ”¾",
    "ğ•˜",
    "áµ",
    "á¶",
  ],
  "h": [
    "â’½",
    "å„",
    "â“—",
    "Ğ½",
    "ï¼¨",
    "ï½ˆ",
    "á•¼",
    "Ä¦",
    "Ñ’",
    "Ğ½",
    "Ä§",
    "Ä¤",
    "ğ”¥",
    "ğ“±",
    "ğ’½",
    "ğ“—",
    "ğ‡",
    "ğ¡",
    "â„",
    "ğ•™",
    "Ê°",
  ],
  "i": [
    "â’¾",
    "â“˜",
    "Î¹",
    "ï¼©",
    "ï½‰",
    "á¥",
    "ä¸¨",
    "Æ—",
    "à¹€",
    "Î¹",
    "Î¯",
    "Ä®",
    "ğ”¦",
    "ğ“²",
    "ğ’¾",
    "ğ“˜",
    "ğˆ",
    "ğ¢",
    "ğ•€",
    "ğ•š",
    "á¶¤",
  ],
  "j": [
    "â’¿",
    "â“™",
    "× ",
    "ï¼ª",
    "Ú¶",
    "ï½Š",
    "á’",
    "Ä´",
    "×Ÿ",
    "× ",
    "Ñ˜",
    "Ä´",
    "ğ”§",
    "ğ“³",
    "ğ’¿",
    "ğ“™",
    "ğ‰",
    "ğ£",
    "ğ•",
    "ğ•›",
    "Ê²",
  ],
  "k": [
    "â“€",
    "â“š",
    "Ğº",
    "ï¼«",
    "ï½‹",
    "á›•",
    "Òœ",
    "Ğº",
    "Ğº",
    "Ä·",
    "ĞŒ",
    "ğ”¨",
    "ğ“´",
    "ğ“€",
    "ğ“š",
    "ğŠ",
    "ğ¤",
    "ğ•‚",
    "ğ•œ",
    "áµ",
    "Òœ",
  ],
  "l": [
    "â“",
    "â“›",
    "â„“",
    "ã„¥",
    "ï¼¬",
    "ï½Œ",
    "á’ª",
    "Å",
    "l",
    "â„“",
    "Ä»",
    "Ä¹",
    "ğ”©",
    "ğ“µ",
    "ğ“",
    "ğ“›",
    "ğ‹",
    "ğ¥",
    "ğ•ƒ",
    "ğ•",
    "Ë¡",
  ],
  "m": [
    "â“‚",
    "â“œ",
    "Ğ¼",
    "ï¼­",
    "ï½",
    "á—°",
    "Îœ",
    "à¹“",
    "Ğ¼",
    "Ğ¼",
    "Ï»",
    "ğ”ª",
    "ğ“¶",
    "ğ“‚",
    "ğ“œ",
    "ğŒ",
    "ğ¦",
    "ğ•„",
    "ğ•",
    "áµ",
    "çˆª",
  ],
  "n": [
    "â“ƒ",
    "å‡ ",
    "â“",
    "Î·",
    "ï¼®",
    "ï½",
    "á‘",
    "Å‡",
    "à¸ ",
    "Î·",
    "Î®",
    "Å‡",
    "ğ”«",
    "ğ“·",
    "ğ“ƒ",
    "ğ“",
    "ğ",
    "ğ§",
    "â„•",
    "ğ•Ÿ",
    "á¶°",
  ],
  "o": [
    "â“„",
    "ã„–",
    "â“",
    "Ïƒ",
    "ï¼¯",
    "ï½",
    "á—",
    "Ã˜",
    "à¹",
    "Ïƒ",
    "ÏŒ",
    "á»–",
    "ğ”¬",
    "ğ“¸",
    "ğ‘œ",
    "ğ“",
    "ğ",
    "ğ¨",
    "ğ•†",
    "ğ• ",
    "áµ’",
  ],
  "p": [
    "â“…",
    "â“Ÿ",
    "Ï",
    "ï¼°",
    "ï½",
    "å©",
    "á‘­",
    "Æ¤",
    "×§",
    "Ï",
    "Ï",
    "Æ¤",
    "ğ”­",
    "ğ“¹",
    "ğ“…",
    "ğ“Ÿ",
    "ğ",
    "ğ©",
    "â„™",
    "ğ•¡",
    "áµ–",
  ],
  "q": [
    "â“†",
    "â“ ",
    "q",
    "ï¼±",
    "ï½‘",
    "ÉŠ",
    "Î©",
    "á»£",
    "q",
    "q",
    "Çª",
    "ğ”®",
    "ğ“º",
    "ğ“†",
    "ğ“ ",
    "ğ",
    "ğª",
    "â„š",
    "ğ•¢",
    "áµ ",
  ],
  "r": [
    "â“‡",
    "â“¡",
    "Ñ",
    "å°º",
    "ï¼²",
    "ï½’",
    "á–‡",
    "Å˜",
    "Ğ³",
    "Ñ",
    "Å•",
    "Å˜",
    "ğ”¯",
    "ğ“»",
    "ğ“‡",
    "ğ“¡",
    "ğ‘",
    "ğ«",
    "â„",
    "ğ•£",
    "Ê³",
  ],
  "s": [
    "â“ˆ",
    "â“¢",
    "Ñ•",
    "ï¼³",
    "ä¸‚",
    "ï½“",
    "á”•",
    "Å",
    "à¸£",
    "s",
    "ÅŸ",
    "Åœ",
    "ğ”°",
    "ğ“¼",
    "ğ“ˆ",
    "ğ“¢",
    "ğ’",
    "ğ¬",
    "ğ•Š",
    "ğ•¤",
    "Ë¢",
  ],
  "t": [
    "â“‰",
    "â“£",
    "Ñ‚",
    "ï¼´",
    "ï½”",
    "ä¸…",
    "Å¦",
    "t",
    "Ñ‚",
    "Å£",
    "Å¤",
    "ğ”±",
    "ğ“½",
    "ğ“‰",
    "ğ“£",
    "ğ“",
    "ğ­",
    "ğ•‹",
    "ğ•¥",
    "áµ—",
  ],
  "u": [
    "â“Š",
    "â“¤",
    "Ï…",
    "ï¼µ",
    "ï½•",
    "á‘Œ",
    "á»®",
    "à¸¢",
    "Ï…",
    "Ã¹",
    "Ç—",
    "ğ”²",
    "ğ“¾",
    "ğ“Š",
    "ğ“¤",
    "ğ”",
    "ğ®",
    "ğ•Œ",
    "ğ•¦",
    "áµ˜",
  ],
  "v": [
    "â“‹",
    "â“¥",
    "Î½",
    "ï¼¶",
    "ï½–",
    "á¯",
    "V",
    "×©",
    "v",
    "Î½",
    "Ñ¶",
    "ğ”³",
    "ğ“¿",
    "ğ“‹",
    "ğ“¥",
    "ğ•",
    "ğ¯",
    "ğ•",
    "ğ•§",
    "áµ›",
  ],
  "w": [
    "â“Œ",
    "â“¦",
    "Ï‰",
    "ï¼·",
    "ï½—",
    "á—¯",
    "Å´",
    "à¸¬",
    "Ï‰",
    "Ï",
    "Å´",
    "ğ”´",
    "ğ”€",
    "ğ“Œ",
    "ğ“¦",
    "ğ–",
    "ğ°",
    "ğ•",
    "ğ•¨",
    "Ê·",
    "å±±",
  ],
  "x": [
    "â“",
    "â“§",
    "Ï‡",
    "ï¼¸",
    "ä¹‚",
    "ï½˜",
    "á™­",
    "Ğ–",
    "×",
    "x",
    "x",
    "Ğ–",
    "ğ”µ",
    "ğ”",
    "ğ“",
    "ğ“§",
    "ğ—",
    "ğ±",
    "ğ•",
    "ğ•©",
    "Ë£",
  ],
  "y": [
    "â“",
    "ã„š",
    "â“¨",
    "Ñƒ",
    "ï¼¹",
    "ï½™",
    "Æ³",
    "Â¥",
    "×¥",
    "Ò¯",
    "Ñ‡",
    "Ğ",
    "ğ”¶",
    "ğ”‚",
    "ğ“",
    "ğ“¨",
    "ğ˜",
    "ğ²",
    "ğ•",
    "ğ•ª",
    "Ê¸",
  ],
  "z": [
    "â“",
    "â“©",
    "z",
    "ä¹™",
    "ï¼º",
    "ï½š",
    "Æµ",
    "Å½",
    "z",
    "z",
    "Å¾",
    "Å»",
    "ğ”·",
    "ğ”ƒ",
    "ğ“",
    "ğ“©",
    "ğ™",
    "ğ³",
    "â„¤",
    "ğ•«",
    "á¶»",
  ],
};

export const cmdCrazyText: CommandMiddleware<BotContext> = async (ctx) => {
  const text = ctx.match;

  if (!text) {
    await ctx.reply(
      "Missing text. Usage: `/crazytxt text goes here`",
    );
    return;
  }

  const result = text
    .split("")
    .map((char) => {
      const charTable = table[char];
      return Array.isArray(charTable) ? getRandomValue(charTable) : char;
    })
    .join("");

  await Promise.allSettled([
    ctx.deleteMessage(),
    ctx.reply(result),
  ]);
};
